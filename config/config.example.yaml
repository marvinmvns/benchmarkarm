# Raspberry Pi Voice Processor - Configuração de Exemplo
# ======================================================
# Copie este arquivo para config.yaml e ajuste conforme necessário

# Modo de operação: local, api, hybrid
mode: "hybrid"

# Configuração de Áudio (ReSpeaker)
audio:
  device: ""
  sample_rate: 16000
  channels: 1
  chunk_size: 1024
  max_duration: 30
  silence_duration: 2.0
  vad:
    enabled: true
    aggressiveness: 2
    min_speech_duration: 0.5

# Configuração do Whisper (Transcrição)
whisper:
  model: "tiny"
  language: "pt"
  use_cpp: true
  threads: 4
  quantization: "q5_0"
  beam_size: 1
  suppress_blank: true

# Configuração do LLM (Resumo/Processamento)
llm:
  provider: "local"
  local:
    model: "tinyllama"
    model_path: ""
    context_size: 512
    threads: 4
    max_tokens: 150
    temperature: 0.3
    quantization: "q4_0"
    use_server_mode: true  # OTIMIZADO: servidor persistente (5-10s mais rápido)
    server_port: 8080
  openai:
    api_key: "${OPENAI_API_KEY}"
    model: "gpt-4o-mini"
    max_tokens: 200
    temperature: 0.3
  anthropic:
    api_key: "${ANTHROPIC_API_KEY}"
    model: "claude-3-haiku-20240307"
    max_tokens: 200
    temperature: 0.3
  ollama:
    host: "http://localhost:11434"
    model: "tinyllama"
    max_tokens: 200

# Prompts
prompts:
  summarize: |
    Resuma o seguinte texto de forma concisa:
    {text}
    Resumo:
  extract_actions: |
    Extraia as ações mencionadas:
    {text}
    Ações:
  custom: ""

# Sistema
system:
  cache_enabled: true
  cache_dir: "~/.cache/voice-processor"
  cache_ttl: 3600
  log_level: "INFO"
  log_file: ""
  low_memory_mode: true
  timeout: 60

# Hardware
hardware:
  respeaker_type: "2mic"
  led_enabled: true
  button_gpio: 17
# Escuta Contínua & Transcrição Automática
# ==========================================
# Dois modos de entrada de áudio:
#   1. ReSpeaker HAT - Microfone local (habilitado por padrão)
#   2. USB Gadget - Recebe áudio via USB de um PC (requer setup)
usb_receiver:
  # Modo 1: ReSpeaker HAT (Microfone Local)
  enabled: true                       # Habilitar escuta via ReSpeaker
  continuous_listen: true             # Escuta contínua 24/7 automática
  
  # Modo 2: USB Gadget (Áudio via USB)
  usb_gadget_enabled: false           # Desabilitado por padrão (requer: sudo ./scripts/setup_usb_gadget.sh)
  
  # Configurações de Gravação
  save_directory: "~/audio-recordings"  # Onde salvar gravações
  sample_rate: 44100                  # Taxa de amostragem (CD quality)
  channels: 2                         # Stereo
  max_audio_duration: 300             # Duração máxima por arquivo (5 minutos)
  
  # Processamento Automático
  auto_transcribe: true               # Transcrever com Whisper
  auto_summarize: true                # Gerar resumo com LLM
  min_audio_duration: 3.0             # Duração mínima para processar (segundos)
  
  # Divisão por Silêncio
  silence_split: true                 # Dividir gravação em segmentos
  silence_threshold: 2.0              # Segundos de silêncio para dividir
  
  # Opções Adicionais
  process_on_disconnect: true         # Processar quando USB desconectar
  keep_original_audio: true           # Manter arquivo WAV original
